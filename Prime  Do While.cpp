#include <iostream> 

int main() { 
    int num; // ประกาศตัวแปรชนิด integer (จำนวนเต็ม) ชื่อ num เพื่อใช้เก็บค่าตัวเลขที่ผู้ใช้จะป้อนเข้ามา
    
    std::cout << "Enter number : "; 
    
    std::cin >> num; 

    std::cout << "Output:" << std::endl; 

    int i = num;     // กำหนดให้ตัวแปร i มีค่าเริ่มต้นเท่ากับ num
    
    // นี่คือการตรวจสอบเงื่อนไขพิเศษก่อนเข้าลูป
    // เพื่อป้องกันการรันโค้ดส่วนของ do-while เมื่อผู้ใช้ป้อนค่าที่น้อยกว่า 2 (เช่น 0 หรือ 1)
    if (i >= 2) { 
        
        // นี่คือการเริ่มต้น **Outer do-while loop**
        // ลูปนี้จะทำงานอย่างน้อยหนึ่งรอบเสมอ แล้วจึงค่อยตรวจสอบเงื่อนไขที่ i >= 2
        do {
            
            // สร้างตัวแปร boolean (ตรรกะ) ชื่อ isPrime และกำหนดค่าเริ่มต้นเป็น true (จริง)
            // เราจะสมมติไว้ก่อนว่าตัวเลข i เป็นจำนวนเฉพาะ
            bool isPrime = true; 

            // นี่คือการเริ่มต้น **Inner do-while loop**
            // กำหนดให้ตัวแปร j มีค่าเริ่มต้นเท่ากับ 2 เพื่อใช้เป็นตัวหาร
            int j = 2; 
            
            // ตรวจสอบเงื่อนไขพิเศษสำหรับตัวเลขที่มากกว่า 2
            // เพื่อหลีกเลี่ยงลูปไม่รู้จบ (infinite loop) ในกรณีที่ i มีค่าเป็น 2
            if (i > 2) { 
                
                // ลูปนี้จะทำงานเพื่อหาตัวหารของ i
                // โดยจะทำงานอย่างน้อยหนึ่งครั้ง แล้วจึงตรวจสอบเงื่อนไข j < i
                do {
                    
                    // ตรวจสอบว่า i หารด้วย j ลงตัวหรือไม่
                    if (i % j == 0) { 
                        
                        // ถ้าหารลงตัว แสดงว่า i **ไม่** ใช่จำนวนเฉพาะ
                        isPrime = false; 
                        
                        // ใช้คำสั่ง break เพื่อออกจากลูป while รอบในทันที
                        // เพราะเมื่อเจอตัวหารแล้ว ก็ไม่จำเป็นต้องตรวจสอบต่อ
                        break; 
                    }
                    
                    // เพิ่มค่า j ขึ้นทีละ 1 เพื่อตรวจสอบตัวหารถัดไป
                    j++; 
                } while (j < i);
            }
            
            // เมื่อออกจากลูป do-while รอบในแล้ว จะมาตรวจสอบเงื่อนไขนี้
            // ถ้า isPrime ยังคงเป็น true แสดงว่าไม่พบตัวหารเลย
            if (isPrime) { 
                
                // แสดงค่าของ i (ซึ่งเป็นจำนวนเฉพาะ) ตามด้วยช่องว่างหนึ่งช่อง
                std::cout << i << " "; 
            }
            
            // ลดค่า i ลงทีละ 1 เพื่อให้ลูปนอกวนไปตรวจสอบตัวเลขถัดไป
            i--; 
        } while (i >= 2);
    }
    
    // เมื่อลูป do-while ทำงานเสร็จสิ้นทั้งหมดแล้ว ให้ขึ้นบรรทัดใหม่
    std::cout << std::endl; 
    
    // คืนค่า 0 เพื่อบอกระบบปฏิบัติการว่าโปรแกรมทำงานเสร็จสิ้นโดยไม่มีข้อผิดพลาด
    return 0; 
}